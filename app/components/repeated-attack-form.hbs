<div class="row align-items-top">
  <div class="col-sm">
    <form class="needs-validation" onsubmit={{this.suppressPageRefresh}}>
      <h2>Set Up Current Attacks</h2>
      <div class="row row-cols-sm-auto align-items-top">
        <div class="col">
          <label for="numberOfAttacks">Number of Attacks</label>
          <Input data-test-input-numberOfAttacks class="form-control" name="numberOfAttacks" @type="number"
            @value={{this.numberOfAttacks}} min="0" title="Number of attacks cannot be negative" />
        </div>

        <div class="col">
          <label for="targetAC">Target AC</label>
          <Input data-test-input-targetAC class="form-control" name="targetAC" @type="number"
            @value={{this.targetAC}} />
        </div>
      </div>

      <AdvantageRadio @updateState={{this.setAdvantageState}} />

      <h3 class="mt-3">Enter Attack Details</h3>
      <div class="row row-cols-sm-auto align-items-top">
        <div class="col">
          <label for="toHit">To Hit Modifier</label>
          <Input data-test-input-toHit class="form-control" @type="text" name="toHit" @value={{this.toHit}}
            pattern={{this.diceGroupsRegex}}
            title="Modifier must be dice groups and/or numbers added and subtracted, like '-5 + 1d4' or '7' or '+1d4 - 1d6 + 2'" />
        </div>
      </div>

      {{#each this.damageList as |damage index| }}
      <DamageType data-test-damage-type={{index}} @index={{index}} @setDamage={{damage.setDamage}}
        @setDamageType={{damage.setDamageType}} @setResistant={{damage.setResistant}}
        @setVulnerable={{damage.setVulnerable}} @initialDamage={{damage.damageString}}
        @initialDamageType={{damage.type}} @initialResistant={{damage.targetResistant}}
        @initialVulnerable={{damage.targetVulnerable}} />
      <div class="row align-items-top justify-items-end">
        <div class="col-sm">
          <button data-test-button-remove-damage-type={{index}} class="btn btn-warning my-2" type="button" {{on "click"
            (fn this.removeDamageType index)}}>-</button>
        </div>
      </div>
      <hr>
      {{/each}}
      <div class="row row-cols-sm-auto align-items-top justify-items-end">
        <div class="col">
          <button data-test-button-add-damage-type class="btn btn-info my-3" type="button" {{on "click"
            this.addNewDamageType}}>New Damage Type</button>
        </div>
      </div>

      <div class="row align-items-top">
        <button data-test-button-getDamage class="btn btn-primary m-3" type="submit" id="attackBtn" {{on "click"
          this.simulateRepeatedAttacks}}>Attack!</button>
      </div>
    </form>
  </div>

  <div class="col-lg">
    <DetailDisplay @targetAC={{this.targetAC}} @numberOfAttacks={{this.numberOfAttacks}} @toHit={{this.toHit}}
      @advantageState={{this.advantageState}} @damageList={{this.damageList}} @attackTriggered={{this.attackTriggered}}
      @totalDmg={{this.totalDmg}} @attackDetailsList={{this.attackDetailsList}} />
  </div>
</div>